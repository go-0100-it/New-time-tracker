<html>

<head>
    <title>Authentication Example</title>
</head>

<body>
    <form>
        <div>
            <input id="email" type="text" placeholder="Email...">
        </div>
        <div>
            <input id="password" type="password" placeholder="Password...">
        </div>
        <div>
            <button id="sign-in">Sign In/Register</button>
            <button id="sign-out">Sign Out</button>
        </div>
    </form>
    <!--Include firebase.js  -->
    <script src="https://www.gstatic.com/firebasejs/live/3.0/firebase.js"></script>

    <!--Configure firebase-->
    <script>
        // Initialize Firebase
        var config = {
            apiKey: "AIzaSyBpHxEFisGuyYTf-X3GNUR-eW3KSCYlfOY",
            authDomain: "time-tracker-b63cd.firebaseapp.com",
            databaseURL: "https://time-tracker-b63cd.firebaseio.com",
            storageBucket: "time-tracker-b63cd.appspot.com",
            messagingSenderId: "22337040109"
        };
        firebase.initializeApp(config);
    </script>

    <!--Handle auth events-->
    <script>
        firebase.auth().onAuthStateChanged(function(user) {
            window.user = user;
            // Step 1:
            //  If no user, sign in anonymously with firebase.auth().signInAnonymously()
            //  If there is a user, log out out user details for debugging purposes.
        });
    </script>

    <!--Handle page events-->
    <script>
        document.querySelector('#sign-in').addEventListener('click', function(e) {
            console.log('got the click');
            e.preventDefault();
            e.stopPropagation();
            var email = document.querySelector('#email').value;
            var password = document.querySelector('#password').value
            var credential = firebase.auth.EmailAuthProvider.credential(email, password);
            document.auth = firebase.auth().signInWithEmailAndPassword(email, password)
                .catch(function(err) {
                    console.log(
                        'ERROR occured while logging in.'
                    );
                });
            console.log(document.auth);
            console.log('Welcome ' + document.auth.ea.email);

            // Sign in existing user
            // Step 2
            //  Get a credential with firebase.auth.emailAuthProvider.credential(emailInput.value, passwordInput.value)
            //  If there is no current user, log in with auth.signInWithCredential(credential)
            //  If there is a current user an it's anonymous, atttempt to link the new user with firebase.auth().currentUser.link(credential) 
            //  The user link will fail if the user has already been created, so catch the error and sign in.
        });

        document.querySelector('#sign-out').addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            console.log('You have logged out ' + document.auth.ea.email);
            firebase.auth().signOut();
            console.log(document.auth);
        });
    </script>

</body>

</html>
view rawhow-to-firebase-6-exercise.html hosted with ‚ù§ by GitHub